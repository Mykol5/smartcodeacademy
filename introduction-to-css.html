<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assignment 2: Python IDE</title>
    <link rel="stylesheet" href="css/assignment2.css">
</head>
<body>
    <header>
        <h1>Assignment 2: Python IDE</h1>
    </header>
    <main>
        <section class="question">
            <h2>Assignment Question</h2>
            <p>Write a Python program that displays "Hello, World!" to the console.</p>
        </section>
        <section class="ide">
            <h2>Integrated Development Environment (IDE)</h2>
            <div class="code-editor">
                <textarea id="python-code" placeholder="Enter your Python code here"></textarea>
            </div>
            <button id="run-button">Run</button>
        </section>
        <section class="result">
            <h2>Result</h2>
            <iframe id="result-frame" sandbox="allow-scripts"></iframe>
        </section>
    </main>
    
    <!-- Include Skulpt libraries and scripts here -->
    <script src="js/skulpt.min.js" type="text/javascript"></script>
    <script src="js/skulpt-stdlib.js" type="text/javascript"></script>
    
    <script>
        function initSkulpt() {
            Sk.configure({
                output: function (text) {
                    // Display Skulpt output in the result iframe
                    document.getElementById("result-frame").contentWindow.document.body.innerHTML = text;
                },
            });
        }

        // Call initSkulpt before any Skulpt-related operations
        initSkulpt();

        document.addEventListener("DOMContentLoaded", function () {
            document.getElementById("run-button").addEventListener("click", function () {
                var pythonCode = document.getElementById("python-code").value;
                Sk.misceval.asyncToPromise(function () {
                    return Sk.importMainWithBody("<stdin>", false, pythonCode, true);
                }).catch(function (error) {
                    // Handle Python code execution errors
                    console.error(error);
                });
            });
        });
    </script>
</body>
</html>
